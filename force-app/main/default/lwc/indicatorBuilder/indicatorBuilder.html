<template>
    <article class="slds-card">
        <div class="slds-card__header slds-grid">
            <h2 class="slds-card__header-title">
                <span>Indicator Builder</span>
            </h2>
        </div>
        <div class="slds-card__body slds-card__body_inner">
            <div class="indicatorDetailsContainer slds-grid slds-wrap slds-gutters">
                <div class="slds-col slds-size_1-of-2">
                    <lightning-input label="Indicator Item Label" required></lightning-input>
                </div>
                <div class="slds-col slds-size_1-of-2">
                    <lightning-input label="Indicator Item API Name" required></lightning-input>
                </div>
                <div class="slds-col slds-size_1-of-1">
                    <c-fsc_object-field-selector required layout="horizontal" object-value={indicator.sObject__c}
                        field-value={indicator.Field__c} include-full-details
                        onchange={handleObjectFieldSelectorChange}></c-fsc_object-field-selector>
                </div>
                <div class="slds-col slds-size_1-of-1">
                    <lightning-textarea label="Description" value={indicator.Description__c}></lightning-textarea>
                </div>
            </div>
            <div class="slds-vertical-tabs">
                <!-- <template lwc:if={showSpinner}>
                    <lightning-spinner></lightning-spinner>
                </template> -->
                <ul class="slds-vertical-tabs__nav" role="tablist" aria-orientation="vertical">
                    <template for:each={tabs} for:item="tab" for:index="index">
                        <li class={tab.tabClass} title={tab.variant.label} role="presentation" key={tab.index}
                            data-index={index} onclick={handleTabAnchorClick}>
                            <a class="slds-vertical-tabs__link slds-is-relative tabLink" href="#" role="tab"
                                tabindex="0" aria-selected="true">
                                <c-indicator-bundle-item icon-source={tab.variant.iconSource}
                                    source-value={tab.variant.sourceValue} ind-size="x-small"
                                    ind-foreground-color={tab.variant.foregroundColour}
                                    ind-background-color={tab.variant.backgroundColour}
                                    ind-hover-text={tab.variant.hoverText}>
                                </c-indicator-bundle-item>
                                <span class="slds-truncate" title={tab.variant.label}>{tab.variant.label}</span>
                                <template lwc:if={tab.variant.isExtension}>
                                    <lightning-button-icon icon-name="utility:delete" variant="bare"
                                        class="deleteVariantButton" data-index={index}
                                        onclick={handleVariantDeleteClick}></lightning-button-icon>
                                </template>
                            </a>
                        </li>
                    </template>
                    <lightning-button label="Add extension" icon-name="utility:add" variant="base" stretch
                        onclick={handleAddVariantClick}></lightning-button>
                </ul>

                <div class="slds-vertical-tabs__content slds-show tabSet" role="tabpanel">
                    <c-indicator-builder-extension indicator={indicator} active-variant={activeVariant}
                        icon-options={iconOptions}
                        onvariantchange={handleActiveVariantChange}></c-indicator-builder-extension>
                </div>
            </div>
        </div>
    </article>
</template>