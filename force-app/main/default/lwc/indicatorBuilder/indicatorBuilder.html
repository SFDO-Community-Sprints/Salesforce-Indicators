<template>
    <article class="slds-card">
        <div class="slds-card__header slds-grid">
            <h2 class="slds-card__header-title">
                <span>Indicator Builder</span>
            </h2>
        </div>
        <div class="slds-card__body slds-card__body_inner slds-grid slds-wrap slds-gutters">
            <div class="slds-col slds-size_1-of-2">
                <lightning-input label="Indicator Item Label" required></lightning-input>
            </div>
            <div class="slds-col slds-size_1-of-2">
                <lightning-input label="Indicator Item API Name" required></lightning-input>
            </div>
            <div class="slds-col slds-size_1-of-1">
                <lightning-textarea label="Description"></lightning-textarea>
            </div>
            <div class="slds-col slds-size_1-of-1">
                <c-fsc_object-field-selector required allow-reference-lookups layout="horizontal"
                    object-value={objectApiName} field-value={fieldApiName}
                    onchange={handleObjectFieldSelectorChange}></c-fsc_object-field-selector>
                <template lwc:if={fieldTypeIsNumber}>
                    <div>
                        <lightning-input label="Treat blank fields as zeros" type="checkbox"
                            class="slds-p-top_xx-small"></lightning-input>
                    </div>
                </template>
            </div>
            <!-- <div class="slds-col slds-size_1-of-1">
                <lightning-radio-group name="displayMode" label="Select Display Criteria" options={displayModeOptions}
                    value={displayMode} onchange={handleDisplayModeChange}></lightning-radio-group>
            </div> -->
            <template lwc:if={objectAndFieldSelected}><!-- Empty `if` clause to use `else` --></template>
            <template lwc:else>
                <p class="slds-col slds-size_1-of-1 slds-p-top_small">Select and object and field to configure your
                    Indicator Item.</p>
                <!-- <c-indicator-style-config indicator={indicator} onchange={handleIndicatorChange}></c-indicator-style-config> -->
            </template>

        </div>

        <template lwc:if={objectAndFieldSelected}>
            <div class="slds-vertical-tabs slds-grid">
                <ul class="slds-vertical-tabs__nav slds-col slds-size_1-of-5" role="tablist"
                    aria-orientation="vertical">
                    <p class="slds-p-around_x-small">Variant to show when field...</p>
                    <template for:each={itemVariants} for:item="variant" for:index="index">
                        <li class={variant.tabAnchorClass} title={variant.label} role="presentation" key={variant.label}
                            data-index={index} onclick={handleTabAnchorClick}>
                            <a class="slds-vertical-tabs__link" href="#" role="tab" tabindex="0" aria-selected="true"
                                aria-controls="slds-vertical-tabs-0" id="slds-vertical-tabs-0__nav">
                                <span class="slds-vertical-tabs__left-icon">
                                    <c-indicator-bundle-item icon-source={variant.iconSource}
                                        source-value={variant.sourceValue} ind-size="x-small"
                                        ind-foreground-color={variant.foregroundColor}
                                        ind-background-color={variant.backgroundColor}
                                        ind-hover-text={variant.hoverText}>
                                    </c-indicator-bundle-item>
                                </span>
                                <span class="slds-truncate" title={variant.label}>{variant.label}</span>
                            </a>
                        </li>
                    </template>
                    <div>
                        <lightning-button label="Add variant" icon-name="utility:add" variant="base" stretch
                            onclick={handleAddVariantClick}></lightning-button>
                    </div>
                    <div class="slds-p-horizontal_x-small">
                        <lightning-combobox label="Display..." value={showOneOrAll} options={showOneOrAllOptions.options}></lightning-combobox>
                    </div>
                </ul>

                <template for:each={itemVariants} for:item="variant" for:index="index">
                    <div class={variant.tabPaneClass} role="tabpanel" aria-labelledby="slds-vertical-tabs-0__nav"
                        key={variant.label}>
                        <div class="slds-grid slds-gutters slds-gutters_direct slds-wrap">
                            <div class="slds-col slds-size_1-of-1">
                                <!-- <p class="slds-text-title_bold slds-col">
                                    Indicator Style
                                </p> -->
                                <c-indicator-style-config indicator={variant} data-index={index}
                                    onindicatorchange={handleIndicatorChange}></c-indicator-style-config>
                                <!-- <div class="slds-col slds-size_1-of-1 slds-large-size_1-of-2">
                                <lightning-combobox label="Select Icon Source" options={iconSourceOptions}
                                    value={variant.iconSource} dropdown-alignment="auto" data-index={index}
                                    data-property="iconSource"
                                    onchange={handleVariantPropertyChange}></lightning-combobox>
                            </div>
                            <div class="iconSourceInputs slds-col slds-size_1-of-1 slds-large-size_1-of-2">
                                <template lwc:if={variant.iconSourceIs.sldsIcon}>
                                    <c-icon-selector label="Select Icon" icon-name={variant.sourceValue}
                                        data-index={index} data-property="sourceValue"
                                        oniconselection={handleVariantPropertyChange}></c-icon-selector>
                                </template>
                                <template lwc:elseif={variant.iconSourceIs.url}>
                                    <lightning-input label="Enter URL" value={variant.sourceValue} data-index={index}
                                        data-property="sourceValue"
                                        onchange={handleVariantPropertyChange}></lightning-input>
                                </template>
                                <template lwc:elseif={variant.iconSourceIs.staticResource}>
                                    <lightning-input label="Select Static Resource" value={variant.sourceValue}
                                        data-index={index} data-property="sourceValue"
                                        onchange={handleVariantPropertyChange}></lightning-input>
                                </template>
                                <template lwc:elseif={variant.iconSourceIs.staticText}>
                                    <lightning-input label="Enter Static Text" value={variant.sourceValue}
                                        class="slds-p-top_xxx-small" data-index={index} data-property="sourceValue"
                                        onchange={handleVariantPropertyChange}></lightning-input>
                                </template>
                            </div>
                            <div class="slds-col slds-size_1-of-1 slds-large-size_1-of-2">
                                <lightning-input label="Hover Text" value={variant.hoverText} data-index={index}
                                    data-property="hoverText" onchange={handleVariantPropertyChange}></lightning-input>
                            </div>

                            <div class="slds-col slds-size_1-of-1 slds-large-size_1-of-2 slds-grid slds-wrap">
                                <template lwc:if={variant.showColorSelectors}>
                                    <div class="slds-col slds-size_1-of-1 slds-large-size_1-of-2">
                                        <lightning-input label="Select Foreground Color" type="color" data-index={index}
                                            data-property="foregroundColor"
                                            onchange={handleVariantPropertyChange}></lightning-input>
                                    </div>
                                    <div class="slds-col slds-size_1-of-1 slds-large-size_1-of-2">
                                        <lightning-input label="Select Background Color" type="color" data-index={index}
                                            data-property="backgroundColor"
                                            onchange={handleVariantPropertyChange}></lightning-input>
                                    </div>

                                </template>
                            </div>

                            <div class="slds-col slds-size_1-of-1">
                                <template lwc:if={variant.showColorOption}>
                                    <lightning-input label="Override Colors" type="checkbox" data-index={index}
                                        data-property="overrideColors"
                                        onchange={handleVariantPropertyChange}></lightning-input>
                                </template>
                            </div> -->
                            </div>
                            <div class="slds-col slds-size_1-of-1 slds-grid slds-wrap">

                                <p class="slds-text-title_bold slds-col slds-size_1-of-1">
                                    Indicator Display Logic
                                </p>
                                <div class="slds-col slds-size_1-of-1">
                                    <lightning-combobox label="Show When Field:" options={filteredWhenToDisplayOptions}
                                        value={variant.whenToDisplay} data-index={index} data-property="whenToDisplay"
                                        onchange={handleVariantPropertyChange}
                                        dropdown-alignment="auto"></lightning-combobox>
                                </div>
                                <template lwc:if={variant.filterTypeIs.text}>
                                    <div class="slds-col slds-size_1-of-1">
                                        <lightning-input label="Text"></lightning-input>
                                    </div>
                                </template>
                                <template lwc:elseif={variant.filterTypeIs.number}>
                                    <div class="slds-col slds-size_1-of-1">

                                        <lightning-input label="Number" type="number"></lightning-input>
                                    </div>
                                </template>
                                <template lwc:elseif={variant.filterTypeIs.numericRange}>
                                    <div class="slds-col slds-size_1-of-2">
                                        <lightning-input label="Greater Than or Equal To"
                                            type="number"></lightning-input>
                                    </div>
                                    <div class="slds-col slds-size_1-of-2">
                                        <lightning-input label="Less Than" type="number"></lightning-input>
                                    </div>

                                </template>


                                <!-- <lightning-combobox label="Field Label" options={fieldLabelOptions} data-index={index} data-property="fieldLabelDisplay" onchange={handleVariantPropertyChange} dropdown-alignment="auto"></lightning-combobox> -->
                            </div>
                            <div class="slds-col slds-size_1-of-1 slds-p-top_x-small">
                                <span class="slds-float_right">
                                    <lightning-button label="Clone" class="slds-p-horizontal_xxx-small"></lightning-button>
                                    <lightning-button label="Delete" class="slds-p-horizontal_xxx-small"></lightning-button>
                                </span>
                            </div>
                            <!-- <div
                                class="slds-col slds-size_1-of-4 slds-grid slds-grid_vertical slds-grid_vertical-align-start slds-grid_align-center">
                                <h2 class="slds-text-heading_medium slds-col">Preview</h2>
                                <div class="slds-col">
                                    <c-indicator-bundle-item icon-source={variant.iconSource}
                                        source-value={variant.sourceValue} ind-size="large"
                                        ind-foreground-color={variant.foregroundColor}
                                        ind-background-color={variant.backgroundColor}
                                        ind-hover-text={variant.hoverText}>
                                    </c-indicator-bundle-item>
                                </div>
                            </div> -->
                        </div>
                    </div>
                </template>
            </div>
        </template>
    </article>
</template>